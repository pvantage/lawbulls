<!doctype html>
<html lang="en">
 <head>      
  <meta charset="utf-8">
   <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">   
     <link rel="stylesheet" href="css/bootstrap.min.css">
     <link rel="stylesheet" href="css/style.css?v=1">
     <link rel="stylesheet" href="css/font-awesome.min.css">
     <link rel="stylesheet" type="text/css" href="css/menu_sideslide.css" />
    <link rel="stylesheet" type="text/css" href="css/normalize.css" />
    <script src="js/jquery.js"></script>
    <script type="text/javascript" charset="utf-8" src="cordova.js"></script>   
    <script src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/function.js"></script>
     <title>Law Bulls</title>
   </head>
   <body>
  
   <div class="sign_inscreen">
      <div class="top-header">
         <div class="container">
            <div class="menu-items">                              
               <div class="logodiv">
                  <img src="images/applogo.png" alt="Law Bulls" />
               </div>              
            </div>
         </div>
      </div>
      <div class="signinform">
         <div class="container">
            <form id="account_login">
               <div class="form-group">
                  <input type="text" placeholder="Username/Email Address" name="login_id" id="login_id">
               </div>
               <div class="form-group">
                  <input type="password" placeholder="Password" name="login_password" id="login_password">
               </div>
               <div class="login-button">
                  <button class="button loginbtn" type="button" onClick="loginMe();">Login</button>
                  <button class="button forgotpasswordbtn" type="button" onClick="goforgotPassword();">Forgot Password</button>
               </div>
            </form>
            <div class="divider-div">
               <img src="images/ordivider.png" alt="" />
            </div>
        <div class="loginwithsocial">
         <button class="button facebookbtn" type="button" id="fbLogin"><i class="fa fa-facebook" aria-hidden="true"></i> Log in with facebook</button>
         
        <button class="button googlebtn" id="googleLogin" type="button"><i class="fa fa-google" aria-hidden="true"></i> Log in with google </button>
        
      
        
        </div>
        <div class="signupdiv">
           <a class="button signupbtn" href="signup.html">Sign Up</a>
         </div>
      </div>
      </div>
        <div class="botom-imgwithlongcontent">
            <img src="images/bottombackgroundimg.png" alt="">
         </div>
       </div>       
   </body>
<script type="text/javascript">
// Facebook Login
$("#fbLogin").on('click', function(){	
	
        var fbLoginSuccess = function (userData) {
            //alert("UserInfo: ", userData);
			
			facebookConnectPlugin.api(userData.authResponse.userID + '/?fields=id,name,email', ["public_profile"], function(data) {
		   //alert('Name: '+ data.name + ', email: '+data.email);
		   // STORE DATE
		      var fb_email = data.email;
			  var fb_name = data.name;
		  
				var action_url = siteurl + 'account.php?pageacct=fblogin';	
				$.ajax({
				 type: 'POST',
				 url: action_url,
				 dataType: 'json',
				 data: {email:fb_email, name:fb_name},
				 crossDomain: true,
				 success: function(data){		 
					$('.error').remove();
									 
					if(data['success'])
					{
						localStorage.setItem('login_id', data['success']['user_id']);
						localStorage.setItem('disp_name', data['success']['disp_name']);
						window.location = "home.html";
						
					}else if(data['error']){
						
						if(data['error']['email']){
							alert(data['error']['email']);
						}						
								
					}
				 }
			   });
		   
		   // END
		
		}, function(error) {
				alert(error.errorMessage);
		});


        };

        facebookConnectPlugin.login(["public_profile"], fbLoginSuccess,
            function loginError (error) {
                alert(error.errorMessage);
            }
        );
});

// END Facebook Login

// Google Login

$('#googleLogin').on('click', function(){
	/*alert("hello");
	window.plugins.googleplus.login(
    {
      'scopes': 'profile', 
      'webClientId': '409402772452-t60v66o7i7v5n7nbv59udbpoo2btchn5.apps.googleusercontent.com', 
      'offline': true 
    },
    function (obj) {
      alert('All Response: ' + JSON.stringify(obj));
    },
    function (msg) {
      alert('error: ' + msg);
    }
);*/


window.plugins.googleplus.login(
    {
      'scopes': 'profile',
      'webClientId': '850431985783-bjmmo06um0i0pcd0ujt2ug0fagjn3te9.apps.googleusercontent.com', // optional clientId of your Web application from Credentials settings of your project - On Android, this MUST be included to get an idToken. On iOS, it is not required.
      'offline': true, // optional, but requires the webClientId - if set to true the plugin will also return a serverAuthCode, which can be used to grant offline access to a non-Google server
    },
    function (obj) {
      alert(JSON.stringify(obj)); // do something useful instead of alerting
    },
    function (msg) {
      alert('error: ' + msg);
    }
);




});

 
// End Google login
</script> 
</html>